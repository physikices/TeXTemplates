\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[brazilian]{babel}
\usepackage{lmodern}
\usepackage[absolute,overlay]{textpos}
\usefonttheme[onlymath]{serif}
\usepackage{mathtools}
% \usepackage{siunitx}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{physics}
% \usepackage{feynman}
\usepackage{xcolor}

% Imagens
\usepackage{graphicx}
\usepackage{svg}
% Imagens
\usepackage{graphicx}

% Tikz
\usepackage{tikz}
\usetikzlibrary{decorations.markings}
\usetikzlibrary{shadows}
\usetikzlibrary{shadows.blur, trees}
\tikzset{
	invisible/.style={opacity=0},
	visible on/.style={alt={#1{}{invisible}}},
	alt/.code args={<#1>#2#3}{%
		\alt<#1>{\pgfkeysalso{#2}}{\pgfkeysalso{#3}} % \pgfkeysalso doesn't change the path
		hide on/.code={\only<#1>{\color{white}}}
	},
	basic/.style = {
		sibling distance=4.5cm,
		draw,
		rectangle
	},
	root/.style = {
		basic,
		align=center,
		fill=greenudesc,
		draw=none,
		text=white,
		blur shadow={
			shadow blur steps=5,
			shadow blur extra rounding=0pt,
			shadow xshift=.5pt
		},
		thin,
	},
	level 1/.style = {
		basic,
		thin,
		align=center,
		fill=redudesc,
		draw=none,
		text=white,
		% text width=11em
	},
	level 2/.style = {
		basic,
		thin,
		align=center,
		fill=green!30,
		text width=7em,
		text=black
	},
	level 3/.style = {
		basic,
		rounded corners,
		thin,
		align=center,
		fill=cyan!20,
		minimum size=5mm
	},
	circlenode/.style = {
		circle,
		draw=greenudesc,
		fill=greenudesc!15,
		ultra thin,
		minimum size=7mm
	},
	squarednode/.style = {
		rectangle,
		draw=red!60,
		fill=red!5,
		ultra thin,
		minimum size=5mm
	},
	mathnode/.style = {
		rectangle,
		draw=cyan!60,
		fill=cyan!5,
		ultra thin,
		minimum size=.1cm
	}
}

% Legendas
\usepackage[font=footnotesize,labelfont=bf]{caption}
\setbeamertemplate{caption}[numbered]

% Coloridos
\usepackage{xcolor}
\definecolor{greenudesc}{RGB}{20,155,85}
\definecolor{redudesc}{RGB}{240,65,55}
\definecolor{gray50udesc}{RGB}{158,160,158}
\definecolor{gray65udesc}{RGB}{125,127,130}
\definecolor{gray80udesc}{RGB}{96,97,101}

% Remover ícones de navegação
\setbeamertemplate{navigation symbols}{}
% mas mostrar número de páginas
\addtobeamertemplate{navigation symbols}{}{%
	\usebeamerfont{footline}%
	\usebeamercolor[fg]{footline}%
}

\setbeamertemplate{frametitle}{%
	\ifbeamercolorempty[bg]{frametitle}{}{\nointerlineskip}%
		\@tempdima=\textwidth%
		\advance\@tempdima by\beamer@leftmargin%
		\advance\@tempdima by\beamer@rightmargin%
		\advance\@tempdima by-1em% <- change value here
		\hfill%
		\begin{beamercolorbox}[sep=0.3cm,left,wd=\the\@tempdima]{frametitle}
			\usebeamerfont{frametitle}%
			\vbox{}\vskip-1ex%
			\if@tempswa\else\csname beamer@fteleft\endcsname\fi%
			\strut\insertframetitle\strut\par%
			{%
				\ifx\insertframesubtitle\@empty%
				\else%
					{\usebeamerfont{framesubtitle}\usebeamercolor[fg]{framesubtitle}\strut\insertframesubtitle\strut\par}%
				\fi
			}%
			\vskip-1ex%
			\if@tempswa\else\vskip-.3cm\fi% set inside beamercolorbox... evil here...
		\end{beamercolorbox}%
	}

	\setbeamercolor{footline}{fg=black}
	\setbeamerfont{footline}{series=\bfseries}
	\setbeamertemplate{footline}{
		\usebeamercolor[fg]{page number in head}%
		\usebeamerfont{page number in head}%
		\hspace{20pt}
		\insertframenumber/\inserttotalframenumber
		\vspace{6pt}
	}



	% Redefinir propriedades do beamer para conter cores acinzentadas
	\setbeamersize{text margin left=45pt,text margin right=17pt}
	\setbeamercolor{title}{fg=gray80udesc}
	\setbeamercolor{frametitle}{fg=gray80udesc}
	\setbeamercolor{structure}{fg=greenudesc}
	\setbeamercolor{normal text}{fg=gray80udesc}

	% blocks shadows
	\setbeamertemplate{blocks}[rounded][shadow=true]

	% block
	\setbeamercolor{block title}{fg=white,bg=greenudesc}
	\AtBeginEnvironment{block}{\setbeamercolor{itemize item}{fg=greenudesc}}

	% alertblock
	\setbeamercolor{block title alerted}{fg=white,bg=redudesc}
	\AtBeginEnvironment{alertblock}{\setbeamercolor{itemize item}{fg=redudesc}}

	% exampleblock
	\setbeamercolor{block title example}{fg=white,bg=gray80udesc}
	\AtBeginEnvironment{exampleblock}{\setbeamercolor{itemize item}{fg=gray80udesc}}


	% Variáveis para \capa e \capadetras
	\newcommand{\titulo}[1]{\def\@titulo{#1}}
	\newcommand{\subtitulo}[1]{\def\@subtitulo{#1}}
	\newcommand*{\autores}[1]{\def\@autores{#1}}
	\newcommand{\universidade}[1]{\def\@universidade{#1}}
	\newcommand{\contato}[1]{\def\@contato{#1}}
	\newcommand{\frase}[1]{\def\@frase{#1}}
	\contato{}
	\universidade{}

	% Estilo da capa
	\newcommand{\capa}{
		{
			\usebackgroundtemplate
			{%
				\includegraphics[width=\paperwidth, height=\paperheight]{style/capa.png}
			}
			\begin{frame}[plain]
				\vspace{-1em}

				\makeatletter

				\vskip .5em % <- ajuste de altura do campo /frase
				\begin{beamercolorbox}[sep=3pt,right]{author}
					\hfill \scriptsize \textbf{\textcolor{white}{\@frase}}
				\end{beamercolorbox}

				\vskip 5.7em

				\begin{beamercolorbox}[sep=5pt,right]{title}
					\hfill \usebeamerfont{title}{\huge \textcolor{gray80udesc}{\@titulo}}
				\end{beamercolorbox}

				\vskip -0.5em

				\begin{beamercolorbox}[sep=5pt,right]{title}
					\hfill \usebeamerfont{title}{\large \textcolor{gray65udesc}{\@subtitulo}}
				\end{beamercolorbox}

				\vskip2em

				\begin{beamercolorbox}[sep=3pt,right]{author}
					\hfill \scriptsize \textbf{\textcolor{gray65udesc}{\autor{}}}

					\vskip0.35em
					\hfill \textcolor{gray65udesc}{\@universidade}
				\end{beamercolorbox}

				\vskip 4em
				\hfill
				\begin{minipage}{.5\linewidth}
					\hfill \includegraphics[width=.2\linewidth]{style/cnpq.png}
					\hfill \includegraphics[width=.25\linewidth]{style/fapesc.png}
					% \hfill \includegraphics[width=.25\linewidth]{style/sic.png}
					\hfill \includegraphics[width=.2\linewidth]{style/udesc.png}
				\end{minipage}
			\end{frame}
			\makeatother
		}
	}

	% Estilo do Slide
	\newenvironment{slide}[2]
	{
		\usebackgroundtemplate
		{%
			\includegraphics[width=\paperwidth, height=\paperheight]{style/slide.png}
		}
		\begin{frame}{#1}{\hspace{.25em}$\vdash$ #2}
			\begin{tikzpicture}[overlay, remember picture]
				\node[left=0.2cm] at (current page.-27){
						\includegraphics[height=.8em]{style/udesc_mini.png}
					};					
				\node[basic,fill=greenudesc,minimum width=1.3em,minimum height=1.5em,xshift=.25cm,yshift=-.59cm,draw=none]at(current page.north west){};
			\end{tikzpicture}
		}
		{
		\end{frame}

	}
	% 
	% Slide de Seção
	\newcommand{\secframe}[2]{%
		{
			\usebackgroundtemplate
			{%
				\includegraphics[width=\paperwidth, height=\paperheight]{style/secbg.png}
			}
			\begin{frame}[plain]
				\tikzset{
					udesc greenBox/.style = {
						thin,
						blur shadow={
							shadow blur steps=10,
							shadow blur extra rounding=2pt, 
							shadow xshift=1pt
						},
						rectangle,
						minimum width=14em,
						minimum height=20mm,
						fill=greenudesc,
						% text right=1ex,
						anchor=base,
						inner sep=2ex
					},
				}
				\begin{tikzpicture}[remember picture,overlay]
					\node	[udesc greenBox, align=right, text=white](t1) at (1,-1){{\hspace{80pt}\LARGE #1}\\#2}; 
				\end{tikzpicture}
			\end{frame}
		}
	}

	%	Redefinir o estilo do frame globalmente.
	%
	\usebackgroundtemplate
	{%
		\includegraphics[width=\paperwidth, height=\paperheight]{style/slide.png}
	}
	% Estilo da contracapa
	\newcommand{\capadetras}[1]{
		{
			\usebackgroundtemplate
			{%
				\includegraphics[width=\paperwidth, height=\paperheight]{style/contracapa.png}
			}
			\begin{frame}[plain]
				\vspace{-3.5em}

				\begin{beamercolorbox}[sep=5pt,right]{title}
					\usebeamerfont{title}{\huge \textcolor{gray65udesc}{#1}}
				\end{beamercolorbox}

				\vskip 10.5em
				\vfill

				\makeatletter
				\begin{beamercolorbox}[right]{subtitle}
					\scriptsize \textbf{\textcolor{white}{\@contato}}
				\end{beamercolorbox}
				\makeatother

				\vskip 6em
				\hfill
				\begin{minipage}{.5\linewidth}
					\hfill \includegraphics[width=.3\linewidth]{style/udesc_white.png}	
				\end{minipage}

			\end{frame}
		}

	}

	% Automatização das imagens
	\newcommand {\imagem}[3] {
		\begin{figure}
			\centering
			\includegraphics[width=#1\linewidth,height=0.7\textheight,keepaspectratio]{#2}
			\caption{#3}
		\end{figure}
	}
